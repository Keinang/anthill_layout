<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js"><span id='global-property-'>/**
</span> * Created with JetBrains RubyMine.
 * User: teamco
 * Date: 11/24/12
 * Time: 10:12 PM
 * To change this template use File | Settings | File Templates.
 */

define([
    &#39;lib/packages/rgbcolor&#39;,
    &#39;modules/base&#39;
], function defineBaseElement(RGBColor, Base) {

    var BaseElement = function BaseElement() {

    };

    return BaseElement.extend({

<span id='global-method-_config'>        /**
</span>         * Element config before build
         * @param {{createStyle: Function, renderUUID: Function}} view
         * @param {{style: String, id: String, [css], [events], [opacity]}} opts
         * @param $html
         * @returns {*}
         * @private
         */
        _config: function _config(view, opts, $html) {
            this.view = view;
            this.style = opts.style || view.createStyle();
            this.id = view.renderUUID(opts.id);
            this.events = opts.events;
            this.opacity = opts.opacity || 1.0;
            this.css = this.base.define(opts.css, {}, true);

            this.$ = $html.attr({
                id: this.id
            }).addClass(this.style).css(this.css);

            return this;
        },

<span id='global-method-bindEvents'>        /**
</span>         * Bind element events
         */
        bindEvents: function bindEvents() {
            var scope = this.view.scope,
                $element = this.$;
            $.each(
                this.base.define(this.events, [], true),
                function each(index, event) {
                    scope.eventmanager.onEvent.bind({
                        scope: scope,
                        $: $element
                    })(event, index);
                }
            );
        },

<span id='global-method-setPosition'>        /**
</span>         * Centralize element into container
         * @param {{$container, $item, css, position: String}} opts
         * Position options:
         *      [&#39;tl&#39; &#39;tc&#39; &#39;tr&#39;]
         *      [&#39;cl&#39; &#39;cc&#39; &#39;cr&#39;]
         *      [&#39;bl&#39; &#39;bc&#39; &#39;br&#39;]
         * @returns {opts.$item}
         */
        setPosition: function setPosition(opts) {
            var cWidth = opts.$container.outerWidth(),
                cHeight = opts.$container.outerHeight(),
                $item = opts.$item,
                eWidth = $item.outerWidth(),
                eHeight = $item.outerHeight();

            var top = &#39;auto&#39;,
                left = &#39;auto&#39;,
                mw = cWidth - eWidth,
                cw = mw / 2,
                mh = cHeight - eHeight,
                ch = mh / 2;

            if (opts.position == &#39;tl&#39;) {
            } else if (opts.position == &#39;tc&#39;) {
                left = cw;
            } else if (opts.position == &#39;tr&#39;) {
                left = mw;
            } else if (opts.position == &#39;cl&#39;) {
                top = ch;
            } else if (opts.position == &#39;cc&#39;) {
                top = ch;
                left = cw;
            } else if (opts.position == &#39;cr&#39;) {
                top = ch;
                left = mw;
            } else if (opts.position == &#39;bl&#39;) {
                top = mh;
            } else if (opts.position == &#39;bc&#39;) {
                top = mh;
                left = cw;
            } else if (opts.position == &#39;br&#39;) {
                top = mh;
                left = mw;
            }

            var css = $.extend({
                left: left,
                top: top
            }, opts.css || {});

            return $item.css(css);
        },

<span id='global-method-destroyB4Create'>        /**
</span>         * Destroy element before create
         * @param {Boolean} destroy
         */
        destroyB4Create: function destroyB4Create(destroy) {
            var $container = this.$container;

            function destroyElement($element) {
                if ($element.length &gt; 0) {
                    this.view.scope.logger.warn(
                        this.constructor.name,
                        &#39;Element will overwritten&#39;
                    );
                    $element.remove();
                }
            }

            destroyElement.bind(this)($container.find(&#39;#&#39; + this.id));

            if (this.base.defineBoolean(destroy, false, true)) {
                destroyElement.bind(this)($container.find(&#39;.&#39; + this.style));
            }
        },

<span id='global-method-build'>        /**
</span>         * Build element
         * @param {{$container, [append], destroy, [callback]}} opts
         * @returns {*}
         */
        build: function build(opts) {
            var base = this.base;
            opts = base.define(opts, {}, true);

            var append = base.defineBoolean(opts.append, true, true);

            if (this.$) {
                this.$container = $(opts.$container);
                this.destroyB4Create(opts.destroy);
                if (append) {
                    this.$.appendTo(opts.$container);
                } else {
                    this.$.prependTo(opts.$container);
                }
                if (base.isFunction(opts.callback)) {
                    opts.callback();
                }
            }

            this.bindEvents();

            return this;
        },

<span id='global-method-destroy'>        /**
</span>         * Destroy element
         * @returns {*}
         */
        destroy: function destroy() {
            if (this.$) {
                this.view.scope.logger.debug(&#39;Destroy element&#39;, this);
                this.$.unbind().remove();
            }
            return this;
        },

<span id='global-method-hide'>        /**
</span>         * Hide element
         * @returns {*}
         */
        hide: function hide() {
            this.view.scope.logger.debug(&#39;Hide element&#39;);
            return this.$.hide();
        },

<span id='global-method-empty'>        /**
</span>         * Clear element internal HTML
         * @returns {*|Boolean}
         */
        empty: function empty() {
            this.view.scope.logger.debug(&#39;Clear inner html of the element&#39;);
            return this.$.empty();
        },

<span id='global-method-fadeIn'>        /**
</span>         * Fade in effect
         * @returns {*}
         */
        fadeIn: function fadeIn() {
            return this.$.stop(true, true).fadeIn();
        },

<span id='global-method-fadeOut'>        /**
</span>         * Fade out effect
         * @returns {*}
         */
        fadeOut: function fadeOut() {
            return this.$.stop(true, true).fadeOut();
        },

<span id='global-method-show'>        /**
</span>         * Show element
         * @returns {*}
         */
        show: function show() {
            return this.$.show();
        },

<span id='global-method-removeStyle'>        /**
</span>         * Remove element inline style
         */
        removeStyle: function removeStyle() {
            this.$.attr({
                style: &#39;&#39;
            });
        },

<span id='global-method-stretch'>        /**
</span>         * Stretch element in parent container
         * @returns {*}
         */
        stretch: function stretch() {
            var config = this.view.scope.config,
                items = 1;
            if (config.parent &amp;&amp; config.html.stretch) {
                items = this.base.lib.hash.hashLength(config.parent.items);
                if (items &gt; 1) {
                    this.$.css({
                        left: (items - 1) * 100 + &#39;%&#39;
                    });
                }
            }

            return this;
        },

<span id='global-method-getRootContainer'>        /**
</span>         * Get root container
         * @returns {*|HTMLElement}
         */
        getRootContainer: function getRootContainer() {
            return $(this.view.scope.controller.root().config.html.container);
        },

<span id='global-method-setOpacity'>        /**
</span>         * Set element opacity
         * @param {Number} opacity
         */
        setOpacity: function setOpacity(opacity) {
            this.$.css({
                opacity: opacity
            });
        },

<span id='global-method-getPosition'>        /**
</span>         * Get position
         * @returns {{top, left}}
         */
        getPosition: function getPosition() {
            return this.$.position();
        },
<span id='global-method-getOffset'>        /**
</span>         * Get offset
         * @returns {{top, left}}
         */
        getOffset: function getOffset() {
            return this.$.offset();
        },

<span id='global-method-getWidth'>        /**
</span>         * Get element width
         * @returns {*}
         */
        getWidth: function getWidth() {
            return this.$.width();
        },

<span id='global-method-setWidth'>        /**
</span>         * Set element width
         * @param {String|Number} width
         * @returns {Number}
         */
        setWidth: function setWidth(width) {
            this.$.css({
                width: width
            });

            return this.getWidth();
        },

<span id='global-method-getHeight'>        /**
</span>         * Get element height
         * @returns {*}
         */
        getHeight: function getHeight() {
            return this.$.height();
        },

<span id='global-method-setHeight'>        /**
</span>         * Set element height
         * @param {String|Number} height
         * @returns {Number}
         */
        setHeight: function setHeight(height) {
            this.$.css({
                height: height
            });

            return this.getHeight();
        },

<span id='global-method-getCSS'>        /**
</span>         * Get CSS attribute
         * @param {String} value
         * @returns {Number}
         */
        getCSS: function getCSS(value) {
            return this.base.lib.number.str2float(this.$.css(value));
        },

<span id='global-method-getPaddingRight'>        /**
</span>         * Get padding right
         * @returns {Number}
         */
        getPaddingRight: function getPaddingRight() {
            return this.getCSS(&#39;paddingRight&#39;);
        },

<span id='global-method-getPaddingLeft'>        /**
</span>         * Get padding left
         * @returns {Number}
         */
        getPaddingLeft: function getPaddingLeft() {
            return this.getCSS(&#39;paddingLeft&#39;);
        },

<span id='global-method-getPaddingTop'>        /**
</span>         * Get pudding top
         * @returns {Number}
         */
        getPaddingTop: function getPaddingTop() {
            return this.getCSS(&#39;paddingTop&#39;);
        },

<span id='global-method-getPaddingBottom'>        /**
</span>         * Get padding bottom
         * @returns {Number}
         */
        getPaddingBottom: function getPaddingBottom() {
            return this.getCSS(&#39;paddingBottom&#39;);
        },

<span id='global-method-getMarginRight'>        /**
</span>         * Get margin right
         * @returns {Number}
         */
        getMarginRight: function getMarginRight() {
            return this.getCSS(&#39;marginRight&#39;);
        },

<span id='global-method-getMarginLeft'>        /**
</span>         * Get margin left
         * @returns {Number}
         */
        getMarginLeft: function getMarginLeft() {
            return this.getCSS(&#39;marginLeft&#39;);
        },

<span id='global-method-getMarginTop'>        /**
</span>         * Get margin top
         * @returns {Number}
         */
        getMarginTop: function getMarginTop() {
            return this.getCSS(&#39;marginTop&#39;);
        },

<span id='global-method-getMarginBottom'>        /**
</span>         * Get margin bottom
         * @returns {Number}
         */
        getMarginBottom: function getMarginBottom() {
            return this.getCSS(&#39;marginBottom&#39;);
        },

<span id='global-method-getLeftDelta'>        /**
</span>         * Get left delta
         * @returns {Number}
         */
        getLeftDelta: function getLeftDelta() {
            return this.getPaddingLeft() + this.getMarginLeft();
        },

<span id='global-method-getTopDelta'>        /**
</span>         * Get top delta
         * @returns {Number}
         */
        getTopDelta: function getTopDelta() {
            return this.getPaddingTop() + this.getMarginTop();
        },

<span id='global-method-invertColor'>        /**
</span>         * Invert CSS color [color|background-color]
         * @param {String} cssType
         */
        invertColor: function invertColor(cssType) {
            // Create RGBColor object
            var color = new RGBColor(this.$.css(cssType));
            if (color.ok) {
                // Subtract each color component from 255
                return [
                    &#39;rgb(&#39;, (255 - color.r), &#39;, &#39;,
                    (255 - color.g), &#39;, &#39;,
                    (255 - color.b), &#39;)&#39;
                ].join(&#39;&#39;);
            }
        }

    }, Base);
})
;</pre>
</body>
</html>
