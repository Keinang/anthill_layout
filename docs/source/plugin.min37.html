<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">tinymce.PluginManager.add(&quot;template&quot;,function(a){function b(b){return function(){var c=a.settings.templates;&quot;string&quot;==typeof c?tinymce.util.XHR.send({url:c,success:function(a){b(tinymce.util.JSON.parse(a))}}):b(c)}}function c(b){function c(b){function c(b){if(-1==b.indexOf(&quot;&lt;html&gt;&quot;)){var c=&quot;&quot;;tinymce.each(a.contentCSS,function(b){c+=&#39;&lt;link type=&quot;text/css&quot; rel=&quot;stylesheet&quot; href=&quot;&#39;+a.documentBaseURI.toAbsolute(b)+&#39;&quot;&gt;&#39;}),b=&quot;&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&quot;+c+&quot;&lt;/head&gt;&lt;body&gt;&quot;+b+&quot;&lt;/body&gt;&lt;/html&gt;&quot;}b=f(b,&quot;template_preview_replace_values&quot;);var e=d.find(&quot;iframe&quot;)[0].getEl().contentWindow.document;e.open(),e.write(b),e.close()}var g=b.control.value();g.url?tinymce.util.XHR.send({url:g.url,success:function(a){e=a,c(e)}}):(e=g.content,c(e)),d.find(&quot;#description&quot;)[0].text(b.control.value().description)}var d,e,h=[];return b&amp;&amp;0!==b.length?(tinymce.each(b,function(a){h.push({selected:!h.length,text:a.title,value:{url:a.url,content:a.content,description:a.description}})}),d=a.windowManager.open({title:&quot;Insert template&quot;,layout:&quot;flex&quot;,direction:&quot;column&quot;,align:&quot;stretch&quot;,padding:15,spacing:10,items:[{type:&quot;form&quot;,flex:0,padding:0,items:[{type:&quot;container&quot;,label:&quot;Templates&quot;,items:{type:&quot;listbox&quot;,label:&quot;Templates&quot;,name:&quot;template&quot;,values:h,onselect:c}}]},{type:&quot;label&quot;,name:&quot;description&quot;,label:&quot;Description&quot;,text:&quot;\xa0&quot;},{type:&quot;iframe&quot;,flex:1,border:1}],onsubmit:function(){g(!1,e)},width:a.getParam(&quot;template_popup_width&quot;,600),height:a.getParam(&quot;template_popup_height&quot;,500)}),void d.find(&quot;listbox&quot;)[0].fire(&quot;select&quot;)):void a.windowManager.alert(&quot;No templates defined&quot;)}function d(b,c){function d(a,b){if(a=&quot;&quot;+a,a.length&lt;b)for(var c=0;c&lt;b-a.length;c++)a=&quot;0&quot;+a;return a}var e=&quot;Sun Mon Tue Wed Thu Fri Sat Sun&quot;.split(&quot; &quot;),f=&quot;Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday&quot;.split(&quot; &quot;),g=&quot;Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec&quot;.split(&quot; &quot;),h=&quot;January February March April May June July August September October November December&quot;.split(&quot; &quot;);return c=c||new Date,b=b.replace(&quot;%D&quot;,&quot;%m/%d/%Y&quot;),b=b.replace(&quot;%r&quot;,&quot;%I:%M:%S %p&quot;),b=b.replace(&quot;%Y&quot;,&quot;&quot;+c.getFullYear()),b=b.replace(&quot;%y&quot;,&quot;&quot;+c.getYear()),b=b.replace(&quot;%m&quot;,d(c.getMonth()+1,2)),b=b.replace(&quot;%d&quot;,d(c.getDate(),2)),b=b.replace(&quot;%H&quot;,&quot;&quot;+d(c.getHours(),2)),b=b.replace(&quot;%M&quot;,&quot;&quot;+d(c.getMinutes(),2)),b=b.replace(&quot;%S&quot;,&quot;&quot;+d(c.getSeconds(),2)),b=b.replace(&quot;%I&quot;,&quot;&quot;+((c.getHours()+11)%12+1)),b=b.replace(&quot;%p&quot;,&quot;&quot;+(c.getHours()&lt;12?&quot;AM&quot;:&quot;PM&quot;)),b=b.replace(&quot;%B&quot;,&quot;&quot;+a.translate(h[c.getMonth()])),b=b.replace(&quot;%b&quot;,&quot;&quot;+a.translate(g[c.getMonth()])),b=b.replace(&quot;%A&quot;,&quot;&quot;+a.translate(f[c.getDay()])),b=b.replace(&quot;%a&quot;,&quot;&quot;+a.translate(e[c.getDay()])),b=b.replace(&quot;%%&quot;,&quot;%&quot;)}function e(b){var c=a.dom,d=a.getParam(&quot;template_replace_values&quot;);h(c.select(&quot;*&quot;,b),function(a){h(d,function(b,e){c.hasClass(a,e)&amp;&amp;&quot;function&quot;==typeof d[e]&amp;&amp;d[e](a)})})}function f(b,c){return h(a.getParam(c),function(a,c){&quot;function&quot;!=typeof a&amp;&amp;(b=b.replace(new RegExp(&quot;\\{\\$&quot;+c+&quot;\\}&quot;,&quot;g&quot;),a))}),b}function g(b,c){function g(a,b){return new RegExp(&quot;\\b&quot;+b+&quot;\\b&quot;,&quot;g&quot;).test(a.className)}var i,j,k=a.dom,l=a.selection.getContent();c=f(c,&quot;template_replace_values&quot;),i=k.create(&quot;div&quot;,null,c),j=k.select(&quot;.mceTmpl&quot;,i),j&amp;&amp;j.length&gt;0&amp;&amp;(i=k.create(&quot;div&quot;,null),i.appendChild(j[0].cloneNode(!0))),h(k.select(&quot;*&quot;,i),function(b){g(b,a.getParam(&quot;template_cdate_classes&quot;,&quot;cdate&quot;).replace(/\s+/g,&quot;|&quot;))&amp;&amp;(b.innerHTML=d(a.getParam(&quot;template_cdate_format&quot;,a.getLang(&quot;template.cdate_format&quot;)))),g(b,a.getParam(&quot;template_mdate_classes&quot;,&quot;mdate&quot;).replace(/\s+/g,&quot;|&quot;))&amp;&amp;(b.innerHTML=d(a.getParam(&quot;template_mdate_format&quot;,a.getLang(&quot;template.mdate_format&quot;)))),g(b,a.getParam(&quot;template_selected_content_classes&quot;,&quot;selcontent&quot;).replace(/\s+/g,&quot;|&quot;))&amp;&amp;(b.innerHTML=l)}),e(i),a.execCommand(&quot;mceInsertContent&quot;,!1,i.innerHTML),a.addVisual()}var h=tinymce.each;a.addCommand(&quot;mceInsertTemplate&quot;,g),a.addButton(&quot;template&quot;,{title:&quot;Insert template&quot;,onclick:b(c)}),a.addMenuItem(&quot;template&quot;,{text:&quot;Insert template&quot;,onclick:b(c),context:&quot;insert&quot;}),a.on(&quot;PreProcess&quot;,function(b){var c=a.dom;h(c.select(&quot;div&quot;,b.node),function(b){c.hasClass(b,&quot;mceTmpl&quot;)&amp;&amp;(h(c.select(&quot;*&quot;,b),function(b){c.hasClass(b,a.getParam(&quot;template_mdate_classes&quot;,&quot;mdate&quot;).replace(/\s+/g,&quot;|&quot;))&amp;&amp;(b.innerHTML=d(a.getParam(&quot;template_mdate_format&quot;,a.getLang(&quot;template.mdate_format&quot;))))}),e(b))})})});</pre>
</body>
</html>
