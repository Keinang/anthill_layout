<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">tinymce.PluginManager.add(&quot;visualchars&quot;,function(a){function b(b){var c,f,g,h,i,j,k=a.getBody(),l=a.selection;if(d=!d,e.state=d,a.fire(&quot;VisualChars&quot;,{state:d}),b&amp;&amp;(j=l.getBookmark()),d)for(f=[],tinymce.walk(k,function(a){3==a.nodeType&amp;&amp;a.nodeValue&amp;&amp;-1!=a.nodeValue.indexOf(&quot;\xa0&quot;)&amp;&amp;f.push(a)},&quot;childNodes&quot;),g=0;g&lt;f.length;g++){for(h=f[g].nodeValue,h=h.replace(/(\u00a0)/g,&#39;&lt;span data-mce-bogus=&quot;1&quot; class=&quot;mce-nbsp&quot;&gt;$1&lt;/span&gt;&#39;),i=a.dom.create(&quot;div&quot;,null,h);c=i.lastChild;)a.dom.insertAfter(c,f[g]);a.dom.remove(f[g])}else for(f=a.dom.select(&quot;span.mce-nbsp&quot;,k),g=f.length-1;g&gt;=0;g--)a.dom.remove(f[g],1);l.moveToBookmark(j)}function c(){var b=this;a.on(&quot;VisualChars&quot;,function(a){b.active(a.state)})}var d,e=this;a.addCommand(&quot;mceVisualChars&quot;,b),a.addButton(&quot;visualchars&quot;,{title:&quot;Show invisible characters&quot;,cmd:&quot;mceVisualChars&quot;,onPostRender:c}),a.addMenuItem(&quot;visualchars&quot;,{text:&quot;Show invisible characters&quot;,cmd:&quot;mceVisualChars&quot;,onPostRender:c,selectable:!0,context:&quot;view&quot;,prependToContext:!0}),a.on(&quot;beforegetcontent&quot;,function(a){d&amp;&amp;&quot;raw&quot;!=a.format&amp;&amp;!a.draft&amp;&amp;(d=!0,b(!1))})});</pre>
</body>
</html>
