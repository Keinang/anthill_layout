<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js"><span id='global-property-'>/**
</span> * Created with RubyMine.
 * User: teamco
 * Date: 6/22/14
 * Time: 9:25 PM
 */

define([
    &#39;controller/widget/widget.drag&#39;,
    &#39;controller/widget/widget.resize&#39;
], function defineWidgetInteractions(Draggable, Resizable) {

<span id='WidgetInteractions-method-constructor'><span id='WidgetInteractions'>    /**
</span></span>     * Define Widget Interactions
     * @class WidgetInteractions
     * @constructor
     */
    var WidgetInteractions = function WidgetInteractions() {

    };

    return WidgetInteractions.extend(&#39;WidgetInteractions&#39;, {

<span id='WidgetInteractions-method-setupInteractions'>        /**
</span>         * Setup interactions {Drag|Resize}
         * @member WidgetInteractions
         */
        setupInteractions: function setupInteractions() {

            var scope = this.scope,
                observer = scope.observer,
                eventList = scope.eventmanager.eventList;

            observer.publish(eventList.initDraggable);
            observer.publish(eventList.initResizable);
        },

<span id='WidgetInteractions-method-initDraggable'>        /**
</span>         * Init drag
         * @member WidgetInteractions
         */
        initDraggable: function initDraggable() {
            this.controller.setInteraction(Draggable);
        },

<span id='WidgetInteractions-method-enableDraggable'>        /**
</span>         * Enable drag
         * @member WidgetInteractions
         */
        enableDraggable: function enableDraggable() {
            this.interactions.draggable.enable();
        },

<span id='WidgetInteractions-method-disableDraggable'>        /**
</span>         * Disable drag
         * @member WidgetInteractions
         */
        disableDraggable: function disableDraggable() {
            this.interactions.draggable.disable();
        },

<span id='WidgetInteractions-method-destroyDraggable'>        /**
</span>         * Destroy drag
         * @member WidgetInteractions
         */
        destroyDraggable: function destroyDraggable() {
            this.interactions.draggable.destroy();
        },

<span id='WidgetInteractions-method-initResizable'>        /**
</span>         * Init resize
         * @member WidgetInteractions
         */
        initResizable: function initResizable() {
            this.controller.setInteraction(Resizable);
        },

<span id='WidgetInteractions-method-enableResizable'>        /**
</span>         * Enable resize
         * @member WidgetInteractions
         */
        enableResizable: function enableResizable() {
            this.interactions.resizable.enable();
        },

<span id='WidgetInteractions-method-disableResizable'>        /**
</span>         * Disable resize
         * @member WidgetInteractions
         */
        disableResizable: function disableResizable() {
            this.interactions.resizable.disable();
        },

<span id='WidgetInteractions-method-destroyResizable'>        /**
</span>         * Destroy resize
         * @member WidgetInteractions
         */
        destroyResizable: function destroyResizable() {
            this.interactions.resizable.destroy();
        },

<span id='WidgetInteractions-method-debugInteractions'>        /**
</span>         * Debug interactions
         * @member WidgetInteractions
         * @param {String} interaction
         */
        debugInteractions: function debugInteractions(interaction) {
            this.logger.debug(&#39;Debug interactions&#39;, interaction);
        },

<span id='WidgetInteractions-method-createDraggable'>        /**
</span>         * Create drag
         * @member WidgetInteractions
         */
        createDraggable: function createDraggable() {
            this.logger.debug(&#39;Create drag&#39;, arguments);
        },

<span id='WidgetInteractions-method-startDraggable'>        /**
</span>         * Start drag
         * @member WidgetInteractions
         */
        startDraggable: function startDraggable() {
            this.logger.debug(&#39;Start drag&#39;, arguments);
        },

<span id='WidgetInteractions-method-dragDraggable'>        /**
</span>         * Grid sticker on drag
         * @member WidgetInteractions
         * @param {String} type
         */
        dragDraggable: function dragDraggable(type) {

            this.logger.debug(&#39;On drag&#39;, arguments);

            this.map.selectOverlappedWidgets();

            this.controller.behaviorMode(
                this.controller.getInteractionConfig(&#39;ongoing&#39;),
                type
            );
        },

<span id='WidgetInteractions-method-stopDraggable'>        /**
</span>         * Stop drag
         * @member WidgetInteractions
         * @param {String} type
         */
        stopDraggable: function stopDraggable(type) {

            this.logger.debug(&#39;Stop drag&#39;, arguments);

            this.map.unSelectOverlappedWidgets();

            this.controller.behaviorMode(
                this.controller.getInteractionConfig(&#39;stop&#39;),
                type
            );
        },

<span id='WidgetInteractions-method-createResizable'>        /**
</span>         * Create resize
         * @member WidgetInteractions
         * @param {String} type
         */
        createResizable: function createResizable(type) {
            this.logger.debug(&#39;Create resize&#39;, arguments);
        },

<span id='WidgetInteractions-method-startResizable'>        /**
</span>         * Resize start
         * @member WidgetInteractions
         * @param {String} type
         */
        startResizable: function startResizable(type) {
            this.logger.debug(&#39;Start resize&#39;, arguments);
        },

<span id='WidgetInteractions-method-resizeResizable'>        /**
</span>         * Grid sticker on resize
         * @member WidgetInteractions
         * @param {String} type
         */
        resizeResizable: function resizeResizable(type) {

            this.logger.debug(&#39;On resize&#39;, arguments);

            this.map.selectOverlappedWidgets();

            this.controller.behaviorMode(
                this.controller.getInteractionConfig(&#39;ongoing&#39;),
                type
            );
        },

<span id='WidgetInteractions-method-stopResizable'>        /**
</span>         * Resize stop
         * @member WidgetInteractions
         * @param {String} type
         * @param {{}} [opts]
         * @param [args]
         */
        stopResizable: function stopResizable(type, opts, args) {

            this.logger.debug(&#39;Stop resize&#39;, arguments);

            this.map.unSelectOverlappedWidgets();

<span id='WidgetInteractions-property-opts'>            /**
</span>             * Define opts
             * @type {*}
             */
            opts = this.base.define(opts, {}, true);

<span id='WidgetInteractions-property-controller'>            /**
</span>             * Define controller
             * @type {WidgetController}
             */
            var controller = this.controller;

<span id='WidgetInteractions-property-config'>            /**
</span>             * Get config
             * @type {*|{organize: Boolean, animate: Boolean, callback?: Function, $source}}
             */
            var config = controller.getInteractionConfig(&#39;stop&#39;);

<span id='WidgetInteractions-property-organize'>            /**
</span>             * Define organize
             * @type {boolean}
             */
            config.organize = this.base.defineBoolean(
                opts.organize,
                config.organize,
                true
            );

<span id='WidgetInteractions-property-animate'>            /**
</span>             * Define animate
             * @type {boolean}
             */
            config.animate = this.base.defineBoolean(
                opts.animate,
                config.animate,
                true
            );

            controller.behaviorMode(config, type);
        },

<span id='WidgetInteractions-method-updateResizable'>        /**
</span>         * Update Resizable
         * @member WidgetInteractions
         * @param key
         * @param value
         */
        updateResizable: function updateResizable(key, value) {
            this.updateInteractions(&#39;resizable&#39;, key, value);
        },

<span id='WidgetInteractions-method-updateDraggable'>        /**
</span>         * Update Draggable
         * @member WidgetInteractions
         * @param key
         * @param value
         */
        updateDraggable: function updateDraggable(key, value) {
            this.updateInteractions(&#39;draggable&#39;, key, value);
        },

<span id='WidgetInteractions-method-updateInteractions'>        /**
</span>         * Update interactions
         * @member WidgetInteractions
         * @param type
         * @param key
         * @param value
         */
        updateInteractions: function updateInteractions(type, key, value) {
            this.scope.view.get$item().$[type](&#39;option&#39;, key, value);
        },

<span id='WidgetInteractions-method-isDraggable'>        /**
</span>         * Check if widget is draggable
         * @member WidgetInteractions
         * @returns {Boolean}
         */
        isDraggable: function isDraggable() {
            return this.scope.view.get$item().$.is(&#39;.ui-draggable&#39;);
        },

<span id='WidgetInteractions-method-isResizable'>        /**
</span>         * Check if widget is resizable
         * @member WidgetInteractions
         * @returns {Boolean}
         */
        isResizable: function isResizable() {
            return this.scope.view.get$item().$.is(&#39;.ui-resizable&#39;);
        },

<span id='WidgetController-method-setOnClickUrl'>        /**
</span>         * Transfer click to content
         * @member WidgetController
         * @param {string} url
         */
        setOnClickUrl: function setOnClickUrl(url) {

            if (!this.base.isUrl(url) &amp;&amp; url.length &gt; 0) {
                this.logger.warn(&#39;None valid url&#39;, url);
                return false;
            }

            if (url.length &gt; 0) {
                this.view.get$item().bindOnClickOpenUrl(url);
            }
        }
    });
});</pre>
</body>
</html>
