<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js"><span id='global-property-'>/**
</span> * Created with JetBrains RubyMine.
 * User: teamco
 * Date: 11/17/12
 * Time: 4:10 PM
 * To change this template use File | Settings | File Templates.
 */

define([
    &#39;modules/base&#39;,
    &#39;modules/mvc&#39;,
    &#39;api/widget.api&#39;,
    &#39;controller/widget.controller&#39;,
    &#39;model/widget.model&#39;,
    &#39;view/widget.view&#39;,
    &#39;event/widget.event.manager&#39;,
    &#39;permission/widget.permission&#39;,
    &#39;controller/widget/widget.map&#39;,
    &#39;controller/widget/widget.wireframe&#39;
], function defineWidget(Base, MVC, API, Controller, Model, View, EventManager, Permission, Map, Wireframe) {

<span id='Widget-method-constructor'><span id='Widget'>    /**
</span></span>     * Define Widget
     * @class Widget
     * @extends {Base}
     * @param opts {object}
     * @constructor
     */
    var Widget = function Widget(opts) {

<span id='Widget-property-dom'>        /**
</span>         * Define dom
         * @type {*}
         */
        this.dom = {};

<span id='Widget-property-DEFAULTS'>        /**
</span>         * Default config
         * @type {{
         *  order: number,
         *  html: {
         *      header: boolean,
         *      footer: boolean,
         *      frameLess: boolean,
         *      opacity: number,
         *      overlapping: boolean
         *  },
         *  maximize: boolean,
         *  events: {
         *      draggable: {
         *          snap: boolean,
         *          iframeFix: boolean,
         *          axis: boolean,
         *          scroll: boolean,
         *          connectToSortable: boolean,
         *          cursor: string,
         *          appendTo: string
         *      },
         *      resizable: {
         *          iframeFix: boolean,
         *          handles: string
         *      },
         *      droppable: {
         *          activeClass: string,
         *          hoverClass: string,
         *          greedy: boolean,
         *          tolerance: string
         *      }
         *  }
         * }}
         */
        var DEFAULTS = {
            order: 1,
            html: {
                header: false,
                footer: false,
                frameLess: false,
                opacity: 0.6,
                overlapping: false,
                style: &#39;&#39;
            },
            type: &#39;default&#39;,
            maximize: false,
            events: {
                draggable: {
                    snap: false,
                    iframeFix: true,
                    axis: false,
                    scroll: true,
                    connectToSortable: false,
                    cursor: &#39;move&#39;,
                    appendTo: &#39;parent&#39;
                },
                resizable: {
                    iframeFix: true,
                    handles: &#39;all&#39;
                },
                droppable: {
                    activeClass: &#39;widget-ui-hover&#39;,
                    hoverClass: &#39;widget-ui-active&#39;,
                    greedy: true,
                    tolerance: &#39;pointer&#39;
                }
            }
        };

<span id='Widget-property-mvc'>        /**
</span>         * Define MVC
         * @type {MVC}
         */
        this.mvc = new MVC({
            scope: this,
            config: [opts, DEFAULTS],
            components: [
                API,
                Controller,
                Model,
                View,
                EventManager,
                Permission
            ],
            render: true
        });

<span id='Widget-property-map'>        /**
</span>         * Define map
         * @type {Map}
         */
        this.map = new Map(this);

<span id='Widget-property-wireframe'>        /**
</span>         * Define wireframe
         * @type {Wireframe}
         */
        this.wireframe = new Wireframe(this);

<span id='Widget-property-interactions'>        /**
</span>         * Define interactions: Drag/Resize
         * @type {{Draggable, Resizable}}
         */
        this.interactions = {};

        this.observer.publish(this.eventmanager.eventList.successCreated);

    };

    return Widget.extend(Base);
});
</pre>
</body>
</html>
