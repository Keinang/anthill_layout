<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js"><span id='global-property-'>/**
</span> * Created with JetBrains RubyMine.
 * User: i061485
 * Date: 2/21/13
 * Time: 2:41 PM
 * To change this template use File | Settings | File Templates.
 */

define([
    &#39;modules/translations/en-us&#39;
], function defineI18n(EnUs) {

<span id='global-property-langTypes'>    /**
</span>     * Define language types
     * @type {{en-us: *}}
     */
    var langTypes = {
        &#39;en-us&#39;: EnUs
    };

<span id='i18n-method-i18n'><span id='i18n'>    /**
</span></span>     * Define translations
     * @constructor
     * @class i18n
     * @param {string} lang
     */
    var i18n = function i18n(lang) {

<span id='i18n-property-defaultLanguage'>        /**
</span>         * Define default
         * @type {string}
         */
        var defaultLanguage = &#39;en-us&#39;;

<span id='i18n-property-lang'>        /**
</span>         * Define language
         * @type {string}
         */
        lang = lang || defaultLanguage;

<span id='i18n-property-data'>        /**
</span>         * Define data
         * @type {*}
         */
        var data = langTypes.hasOwnProperty(lang) ?
            langTypes[lang] :
            langTypes[defaultLanguage];

<span id='i18n-method-getData'>        /**
</span>         * Get data by key
         * @member i18n
         * @param key
         * @returns {*}
         */
        this.getData = function getData(key) {
            return data.hasOwnProperty(key) ?
                data[key] : &#39;&#39;;
        };

<span id='i18n-method-updateData'>        /**
</span>         * Update data
         * @member i18n
         * @param translation
         */
        this.updateData = function updateData(translation) {

            var index;

            for (index in translation) {

                if (translation.hasOwnProperty(index)) {
                    data[index] = translation[index];
                }
            }
        };
    };

    return i18n.extend(&#39;i18n&#39;, {

<span id='i18n-method-t'>        /**
</span>         * Translate function
         * @member i18n
         * @param {string} key
         * @param {array} [params]
         * @returns {string}
         */
        t: function t(key, params) {

<span id='i18n-property-result'>            /**
</span>             * Get data
             * @type {string|*}
             */
            var result = this.getData(key);

            if (typeof(params) === &#39;object&#39;) {
                for (var i = 0, l = params.length; i &lt; l; i++) {
                    result = result.replace(
                        new RegExp(&#39;\\{&#39; + i + &#39;\\}&#39;),
                        params[i]
                    );
                }
            }

            return result;
        }
    });

});</pre>
</body>
</html>
