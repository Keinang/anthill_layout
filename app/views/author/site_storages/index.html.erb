<ul class="admin-navigation inner">
  <li><%= render_add_new %></li>
  <% @author_site_storages.each do |author_site_storage| %>
      <% versions = author_site_storage.author_site_versions %>
      <% activated_version = versions.where(activated: true).first %>
      <li>
        <%= link_to author_site_storage.key, preview_path(author_site_storage), {target: '_blank'} %>
        <h4><%= author_site_storage.author_site_type.try(:name) %></h4>
        <h6><%= author_site_storage.uuid %></h6>
        <%= render partial: 'published', locals: {publish: author_site_storage.publish} %>

        <h3>
          <%= author_site_storage.author_widgets.length %><br/>
          <span><%= "#{t('widgets').downcase}" %></span>
        </h3>

        <div>
          <div>
            <ul class="menu arrow_box">
              <li><%= link_to t('development'), mode_path(author_site_storage, :development), {target: '_blank'} %></li>
              <li><%= link_to t('consumption'), mode_path(author_site_storage, :consumption), {target: '_blank'} %></li>
              <li><%= link_to t('authoring'), mode_path(author_site_storage, :authoring), {target: '_blank'} %></li>
              <li><%= link_to t('test'), mode_path(author_site_storage, :test), {target: '_blank'} %></li>
              <li><%= link_to t('preview'), preview_path(author_site_storage), {target: '_blank'} %></li>
              <li><%= link_to t('edit'), edit_author_site_storage_path(author_site_storage) %></li>
              <li><%= link_to t('publish'), publish_site_path(author_site_storage), remote: true, method: :put %></li>
              <li><%= link_to_destroy(author_site_storage, author_site_storage.key) %></li>
            </ul>
          </div>
          <%= link_to t('version'), author_site_storage_site_versions_path(author_site_storage) %><%= ": #{activated_version.try(:version) || '?'} (#{versions.length})" %>
        </div>
      </li>
  <% end %>
</ul>