<%= javascript_include_tag 'scripts/core/lib/lz-string.js', 'scripts/core/lib/packages/pretty.print.js' %>
<%= form_for(@author_site_version) do |f| %>

    <%= render_notification(@author_site_version) %>
    <%= render_text(:site_storage, @author_site_version.author_site_storage.try(:key)) %>
    <%= render_text_area(f, :content) %>
    <div class="json-view"></div>
    <%= render_number_field(f, :version, true) %>
    <%= render_checkbox(f, :activated) %>
    <%= render_submit(f) %>

    <%= javascript_tag do %>
        $(prettyPrint(JSON.parse(LZString.decompressFromBase64('<%= @author_site_version.content %>')))).appendTo('.json-view');
    <% end %>

<% end %>
